public class UE_moveToAdmissionGranted {
    
    public Admission_Form__c af{get;set;}
    public list<Admission_Form__c> listform{get;set;}
    public list<Admission_Granted__c> listGrant{get;set;}
    public Admission_Granted__c ag{get;set;}
    public boolean msg{get;set;}
    
    
    public UE_moveToAdmissionGranted(ApexPages.StandardController Controller){
        Id pid=Apexpages.currentpage().getParameters().get('id');
        system.debug('ID::::'+pid);
        msg = True;
        
        
        af=[Select id,Lead__c,Name,Academic__c,Seeking_Admission_in_Grade__c,First_Name__c,Last_Name__c,Receipt_No__c,Document_Received__c,Enquiry_No__c,
            Status__c,Enquiry_Number__c,Address__c,Adhaar_Card_No__c,fatherAnnualincome__c,motherAnnual_Income__c,Birth_Place__c,
            Blood_Group__c,Business_Address__c,motherBusiness_Address__c,fatherBusiness_Contact__c,motherBusiness_Contact__c,
            Category__c,Do_have_another_child_with_us__c,Email_Address__c,GuardianEmail_Id__c,GuardianMobile_No__c,GuardianName__c,
            Expiry_Date__c,Father_Detail_Captured__c,Father_Email_Id__c,Father_Last_Name__c,Father_occupation__c,Father_Phone__c,
            Father_Qualification__c,FatherFirst_Name__c,fatherName_of_Organisation__c,Having_Children_from_same_joint_family__c,
            Mobile_Number__c,Mother_Detail_Captured__c,Mother_Email_Id__c,motherLast_Name__c,motherFirst_Name__c,Mother_Occupation__c,
            Mother_Phone__c,Mother_Qualification__c,Mother_Tongue__c,motherName_of_Organisation__c,Nationality__c,PassPort_No__c,
            Reason_of_this_School__c,Relationship__c,Religion__c,Residence_No__c,School_Institution__c,Student_Name__c,Student_Type__c,
            Seeking_Admission_for_another_Child__c,School_Short_Code__c,Registration_Date__c,Application_No__c,Emergency_Contact_No__c from Admission_Form__c where id=: pid ];
        
        system.debug('AdmissionForm_Record:::::'+af);
        
        ag = new Admission_Granted__c();            
        system.debug('Application'+ag);
        
        listGrant = [select id,Name,Admission_Form__c,Admission_Code__c,Status__c,Date_of_Admission__c,Confirmation_Date__c,Fee_Applicable_Date__c,Section__c,User_Id__c,Enrollment_No__c from Admission_Granted__c where Admission_Form__c=: af.Id];
        system.debug('list of Admission Granted::'+listGrant);
        
        if(listGrant.size()>0){
            system.debug('Admission Granted LIST(Inside IF) Size:::'+listGrant.size());
            ApexPages.addmessage(new ApexPages.message(ApexPages.severity.FATAL,'Admission already Granted!'));
            msg=False;
        }
        
        
        //Checking Document Recieved or Not if not recieved then Eror Occured
        try{
            if((af.Status__c !='Admission Accepted' && af.Document_Received__c==False) || (af.Status__c =='Admission Accepted' && af.Document_Received__c==False) || (af.Status__c !='Admission Accepted' && af.Document_Received__c==True) ){
                
                system.debug('DOCUMENT DETAIL LIST(Inside IF) Size:::');
                ApexPages.addmessage(new ApexPages.message(ApexPages.severity.FATAL,'Admission and document both is not approved yet.Kindly collect the Document First !!'));
                msg=False;
                
            }
        }catch(exception exp){
            system.debug('EROOR:::'+exp.getMessage());
        }
    }
    
    public PageReference addmissionGranted()
    {
        try{
            ag.Admission_Form__c = af.Id;
            ag.Academic_Year__c=af.Academic__c;
            ag.Address__c=af.Address__c;
            ag.Seeking_Admission_in_Grade__c=af.Seeking_Admission_in_Grade__c;
            ag.First_Name__c=af.First_Name__c;
            ag.Last_Name__c=af.Last_Name__c;
            ag.Receipt_No__c=af.Receipt_No__c;
            ag.Lead__c=af.Lead__c;
            //ag.Status__c=af.Status__c;
            ag.Enquiry_Number__c=af.Enquiry_Number__c;
            ag.Adhaar_Card_No__c=af.Adhaar_Card_No__c;
            ag.father_Annual_Income__c=af.fatherAnnualincome__c;
            ag.mother_Annual_Income__c=af.motherAnnual_Income__c;
            ag.father_Business_Address__c=af.Business_Address__c;
            ag.mother_Business_Address__c=af.motherBusiness_Address__c;
            ag.father_Business_Contact__c=af.fatherBusiness_Contact__c;
            ag.mother_Business_Contact__c=af.motherBusiness_Contact__c;
            ag.father_Email_Id__c=af.Father_Email_Id__c;
            ag.mother_Email_Id__c=af.Mother_Email_Id__c;
            ag.Father_First_Name__c=af.FatherFirst_Name__c;
            ag.Father_Last_Name__c=af.Father_Last_Name__c;
            ag.mother_First_Name__c=af.motherFirst_Name__c;
            ag.mother_Last_Name__c=af.motherLast_Name__c;
            ag.father_Mobile_No__c=af.Father_Phone__c;
            ag.father_Name_of_Organisation__c=af.fatherName_of_Organisation__c;
            ag.mother_Mobile_No__c=af.Mother_Phone__c;
            ag.mother_Name_of_Organisation__c=af.motherName_of_Organisation__c;
            ag.father_Occupation__c=af.Father_occupation__c;
            ag.father_Qualification__c=af.Father_Qualification__c;
            ag.mother_Occupation__c=af.Mother_Occupation__c;
            ag.mother_Qualification__c=af.Mother_Qualification__c;
            ag.Mother_Tongue__c=af.Mother_Tongue__c;
            ag.Blood_Group__c=af.Blood_Group__c;
            ag.Birth_Place__c=af.Birth_Place__c;
            ag.Residence_No__c=af.Residence_No__c;
            ag.Registration_Date__c=af.Registration_Date__c;
            ag.Name=af.Name;
            ag.Relationship__c=af.Relationship__c;
            ag.Religion__c=af.Religion__c;
            ag.Category__c=af.Category__c;
            ag.guardianEmail_Id__c=af.GuardianEmail_Id__c;
            ag.GuardianName__c=af.GuardianName__c;
            ag.guardianMobile_No__c=af.GuardianMobile_No__c;
            ag.Nationality__c=af.Nationality__c;
            ag.Passport_No__c=af.PassPort_No__c;
            ag.Expiry_Date__c=af.Expiry_Date__c;
            ag.Email_Address__c=af.Email_Address__c;
            ag.School_Institution__c=af.School_Institution__c;
            ag.School_Short_Code__c=af.School_Short_Code__c;
            ag.Student_s_Name__c=af.Student_Name__c;
            ag.Student_Type__c=af.Student_Type__c;
            ag.Mobile_Number__c=af.Mobile_Number__c;
            ag.Enquiry_Number__c=af.Enquiry_Number__c;
            ag.EnquiryNo__c = af.Enquiry_No__c;
            ag.Application_No__c = af.Application_No__c;
            ag.School_Short_Code__c = af.School_Short_Code__c;
            ag.Emergency_Contact_No__c = af.Emergency_Contact_No__c;
            insert ag;
            
        }catch(Exception exp){
            ApexPages.addmessage(new ApexPages.message(ApexPages.severity.FATAL,'Admission and document both is not approved yet.'));
            system.debug('WHILE INSERTION GETING EXCEPTION:::'+exp.getMessage());
            
        }
        return  new pageReference('/'+ag.Id);
    }
    public PageReference cancle(){ 
        return new PageReference('/'+af.Id);
    }
    public static void fakeMethod() {
            Integer j = 0;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
            j++;
        }
}